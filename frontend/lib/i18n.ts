/**
 * Simple i18n implementation for OmniDoc with React support
 */

'use client';

import { useState, useEffect, useCallback } from 'react';

export type Language = 'en' | 'zh' | 'ja' | 'ko';

export const languages: Language[] = ['en', 'zh', 'ja', 'ko'];

export const languageNames: Record<Language, string> = {
  en: 'English',
  zh: '中文',
  ja: '日本語',
  ko: '한국어',
};

// Translation keys
const translations: Record<Language, Record<string, string>> = {
  en: {
    'app.title': 'OmniDoc 2.0',
    'app.subtitle': 'AI-powered documentation generation system',
    'project.idea': 'Project Idea',
    'project.idea.placeholder': 'Describe your project idea in detail...',
    'project.idea.description': 'Provide a detailed description of your project. The more details you include, the better the generated documentation will be.',
    'project.idea.tips.title': 'Tips for Writing a Great Project Idea',
    'project.idea.tips.1': 'Describe the core problem your project solves',
    'project.idea.tips.2': 'Include target users and their needs',
    'project.idea.tips.3': 'Mention key features and functionality',
    'project.idea.tips.4': 'Add technical requirements or constraints if any',
    'documents.title': 'Select Documents',
    'documents.team': 'Team View',
    'documents.solo': 'Solo View',
    'documents.all': 'All Documents',
    'documents.select': 'Select Documents to Generate',
    'documents.selected': 'Selected',
    'documents.dependencies': 'Dependencies',
    'documents.priority.high': 'High Priority',
    'documents.priority.medium': 'Medium Priority',
    'documents.priority.low': 'Low Priority',
    'documents.stage.mvp': 'MVP',
    'documents.stage.iteration': 'Post-MVP',
    'documents.audience.team': 'Team',
    'documents.audience.solo': 'Solo',
    'documents.audience.mixed': 'Mixed',
    'button.generate': 'Generate Documents',
    'button.creating': 'Creating Project...',
    'button.viewResults': 'View Results',
    'error.network': 'Network Error',
    'error.loadDocuments': 'Failed to load documents',
    'error.createProject': 'Failed to create project',
    'status.title': 'Project Status',
    'status.connected': 'Real-time updates connected',
    'status.polling': 'Polling for updates (WebSocket unavailable)',
    'status.loading': 'Loading project status...',
    'status.waiting': 'Waiting for progress updates...',
    'status.progress': 'Progress',
    'status.completed': 'completed',
    'status.generationStarted': 'Generation started',
    'status.planning': 'Planning',
    'status.generating': 'Generating',
    'status.allDone': 'All done! Generated',
    'status.documents': 'documents',
    'status.error': 'Error',
    'status.projectId': 'Project ID',
    'results.title': 'Generated Documents',
    'results.share': 'Share',
    'results.copied': 'Copied!',
    'results.backToStatus': '← Back to Status',
    'results.newProject': 'New Project',
    'results.noDocuments': 'No documents generated yet',
    'results.stillGenerating': 'Documents may still be generating. Check back in a moment.',
    'results.viewStatus': 'View Status',
    'results.loading': 'Loading documents...',
    'results.errorLoading': 'Error loading documents',
    'results.shareTitle': 'OmniDoc Generated Documents',
    'results.shareText': 'Check out these generated project documents',
    'level.strategic': 'Level 1: Strategic (Entrepreneur/CEO)',
    'level.product': 'Level 2: Product Manager',
    'level.developer': 'Level 3: Developer/Technical',
    'level.user': 'Level 4: User/End-user',
    'level.operations': 'Level 5: Operations/Maintenance',
    'level.crossLevel': 'Cross-Level (Everyone)',
    'hero.title': 'Go from Idea to Full Documentation in Minutes',
    'hero.subtitle': 'AI-powered documentation generation system that creates comprehensive project documents from a single idea',
    'hero.description': 'Transform your project idea into a complete suite of documentation with our multi-agent AI system',
    'hero.flow.idea': 'Idea',
    'hero.flow.agents': 'Customized Agents',
    'hero.flow.documents': 'Documents',
    'howItWorks.title': 'How It Works',
    'howItWorks.step1.title': 'Submit Your Idea',
    'howItWorks.step1.description': 'Describe your project idea in detail',
    'howItWorks.step2.title': 'Select Documents',
    'howItWorks.step2.description': 'Choose which documents to generate',
    'howItWorks.step3.title': 'Customized Agents Work',
    'howItWorks.step3.description': 'Customized agents generate your documents',
    'howItWorks.step4.title': 'View & Download',
    'howItWorks.step4.description': 'Access your complete documentation suite',
    // Document names
    'doc.name.requirements': 'Requirements Document',
    'doc.name.requirements_analyst': 'Requirements Document',
    'doc.name.project_charter': 'Project Charter',
    'doc.name.business_model': 'Business Model',
    'doc.name.marketing_plan': 'Marketing Plan',
    'doc.name.gtm_strategy': 'GTM Strategy',
    'doc.name.stakeholders_doc': 'Stakeholders Document',
    'doc.name.stakeholder_communication': 'Stakeholder Communication',
    'doc.name.risk_management_plan': 'Risk Management Plan',
    'doc.name.change_management_plan': 'Change Management Plan',
    'doc.name.feature_roadmap': 'Feature Roadmap',
    'doc.name.pm_management_doc': 'PM Management Doc',
    'doc.name.wbs': 'Work Breakdown Structure',
    'doc.name.user_stories': 'User Stories',
    'doc.name.prd': 'Product Requirements Document',
    'doc.name.fsd': 'Functional Specification Document',
    'doc.name.pm_documentation': 'PM Documentation',
    'doc.name.user_analytics': 'User Analytics',
    'doc.name.dashboard_metrics': 'Dashboard Metrics',
    'doc.name.kpi_metrics_doc': 'KPI Metrics',
    'doc.name.release_notes': 'Release Notes',
    'doc.name.user_feedback_plan': 'User Feedback Plan',
    'doc.name.ab_testing_docs': 'A/B Testing Docs',
    'doc.name.onboarding_flow': 'Onboarding Flow',
    'doc.name.interaction_flows': 'Interaction Flows',
    'doc.name.ui_mockups': 'UI Mockups',
    'doc.name.ui_style_guide': 'UI Style Guide',
    'doc.name.technical_documentation': 'Technical Documentation',
    'doc.name.tad': 'Technical Architecture Document',
    'doc.name.api_documentation': 'API Documentation',
    'doc.name.database_schema': 'Database Schema',
    'doc.name.developer_guide': 'Developer Guide',
    'doc.name.developer_documentation': 'Developer Documentation',
    'doc.name.setup_guide': 'Setup Guide',
    'doc.name.test_plan': 'Test Plan',
    'doc.name.test_documentation': 'Test Documentation',
    'doc.name.cicd_doc': 'CI/CD Documentation',
    'doc.name.api_versioning_policy': 'API Versioning Policy',
    'doc.name.configuration_management_plan': 'Configuration Management Plan',
    'doc.name.deployment_plan': 'Deployment Plan',
    'doc.name.scalability_plan': 'Scalability Plan',
    'doc.name.technical_debt_log': 'Technical Debt Log',
    'doc.name.third_party_integrations': 'Third Party Integrations',
    'doc.name.feature_flag_docs': 'Feature Flag Docs',
    'doc.name.user_documentation': 'User Documentation',
    'doc.name.user_support_doc': 'User Support Doc',
    'doc.name.knowledge_base': 'Knowledge Base',
    'doc.name.support_training_doc': 'Support Training Doc',
    'doc.name.backup_recovery_plan': 'Backup Recovery Plan',
    'doc.name.maintenance_plan': 'Maintenance Plan',
    'doc.name.monitoring_logging_plan': 'Monitoring & Logging Plan',
    'doc.name.performance_optimization_doc': 'Performance Optimization',
    'doc.name.cloud_infrastructure_doc': 'Cloud Infrastructure Doc',
    'doc.name.bcp': 'Business Continuity Plan',
    'doc.name.sla': 'Service Level Agreement',
    'doc.name.vendor_management_docs': 'Vendor Management Docs',
    'doc.name.incident_response_plan': 'Incident Response Plan',
    'doc.name.data_retention_policy': 'Data Retention Policy',
    'doc.name.data_governance_policy': 'Data Governance Policy',
    'doc.name.security_plan': 'Security Plan',
    'doc.name.privacy_policy': 'Privacy Policy',
    'doc.name.terms_of_service': 'Terms of Service',
    'doc.name.legal_compliance': 'Legal Compliance',
    'doc.name.accessibility_plan': 'Accessibility Plan',
    'doc.name.eol_policy': 'End of Life Policy',
    'doc.name.localization_plan': 'Localization Plan',
    'doc.name.technical_audit': 'Technical Audit',
    'doc.name.support_playbook': 'Support Playbook',
    'doc.name.quality_review': 'Quality Review',
    'doc.name.document_improver': 'Document Improver',
    'doc.name.format_converter': 'Format Converter',
    'doc.name.code_analyst': 'Code Analyst',
  },
  zh: {
    'app.title': 'OmniDoc 2.0',
    'app.subtitle': 'AI驱动的文档生成系统',
    'project.idea': '项目想法',
    'project.idea.placeholder': '详细描述您的项目想法...',
    'project.idea.description': '请提供您项目的详细描述。包含的细节越多，生成的文档质量越好。',
    'project.idea.tips.title': '撰写优秀项目想法的技巧',
    'project.idea.tips.1': '描述项目要解决的核心问题',
    'project.idea.tips.2': '包含目标用户及其需求',
    'project.idea.tips.3': '提及关键功能和特性',
    'project.idea.tips.4': '如有技术需求或约束，请添加',
    'documents.title': '选择文档',
    'documents.team': '团队视图',
    'documents.solo': '个人视图',
    'documents.all': '所有文档',
    'documents.select': '选择要生成的文档',
    'documents.selected': '已选择',
    'documents.dependencies': '依赖关系',
    'documents.priority.high': '高优先级',
    'documents.priority.medium': '中优先级',
    'documents.priority.low': '低优先级',
    'documents.stage.mvp': 'MVP阶段',
    'documents.stage.iteration': '后续迭代',
    'documents.audience.team': '团队',
    'documents.audience.solo': '个人',
    'documents.audience.mixed': '混合',
    'button.generate': '生成文档',
    'button.creating': '正在创建项目...',
    'button.viewResults': '查看结果',
    'error.network': '网络错误',
    'error.loadDocuments': '加载文档失败',
    'error.createProject': '创建项目失败',
    'status.title': '项目状态',
    'status.connected': '实时更新已连接',
    'status.polling': '轮询更新（WebSocket不可用）',
    'status.loading': '加载项目状态...',
    'status.waiting': '等待进度更新...',
    'status.progress': '进度',
    'status.completed': '已完成',
    'status.generationStarted': '生成已开始',
    'status.planning': '规划中',
    'status.generating': '生成中',
    'status.allDone': '全部完成！已生成',
    'status.documents': '个文档',
    'status.error': '错误',
    'status.projectId': '项目ID',
    'results.title': '生成的文档',
    'results.share': '分享',
    'results.copied': '已复制！',
    'results.backToStatus': '← 返回状态',
    'results.newProject': '新项目',
    'results.noDocuments': '尚未生成文档',
    'results.stillGenerating': '文档可能仍在生成中。请稍后再查看。',
    'results.viewStatus': '查看状态',
    'results.loading': '加载文档...',
    'results.errorLoading': '加载文档时出错',
    'results.shareTitle': 'OmniDoc生成的文档',
    'results.shareText': '查看这些生成的项目文档',
    'level.strategic': '级别 1: 战略（企业家/CEO）',
    'level.product': '级别 2: 产品经理',
    'level.developer': '级别 3: 开发/技术',
    'level.user': '级别 4: 用户/最终用户',
    'level.operations': '级别 5: 运营/维护',
    'level.crossLevel': '跨级别（所有人）',
    'hero.title': '几分钟内从想法到完整文档',
    'hero.subtitle': 'AI驱动的文档生成系统，从单一想法创建全面的项目文档',
    'hero.description': '使用我们的多智能体AI系统，将您的项目想法转换为完整的文档套件',
    'hero.flow.idea': '想法',
    'hero.flow.agents': '定制智能体',
    'hero.flow.documents': '文档',
    'howItWorks.title': '工作原理',
    'howItWorks.step1.title': '提交您的想法',
    'howItWorks.step1.description': '详细描述您的项目想法',
    'howItWorks.step2.title': '选择文档',
    'howItWorks.step2.description': '选择要生成的文档',
    'howItWorks.step3.title': '定制智能体工作',
    'howItWorks.step3.description': '定制智能体生成您的文档',
    'howItWorks.step4.title': '查看和下载',
    'howItWorks.step4.description': '访问您的完整文档套件',
    // Document names (Chinese)
    'doc.name.requirements': '需求文档',
    'doc.name.requirements_analyst': '需求文档',
    'doc.name.project_charter': '项目章程',
    'doc.name.business_model': '商业模式',
    'doc.name.marketing_plan': '营销计划',
    'doc.name.gtm_strategy': '市场进入策略',
    'doc.name.stakeholders_doc': '利益相关者文档',
    'doc.name.stakeholder_communication': '利益相关者沟通',
    'doc.name.risk_management_plan': '风险管理计划',
    'doc.name.change_management_plan': '变更管理计划',
    'doc.name.feature_roadmap': '功能路线图',
    'doc.name.pm_management_doc': '项目管理文档',
    'doc.name.wbs': '工作分解结构',
    'doc.name.user_stories': '用户故事',
    'doc.name.prd': '产品需求文档',
    'doc.name.fsd': '功能规格文档',
    'doc.name.pm_documentation': '产品管理文档',
    'doc.name.user_analytics': '用户分析',
    'doc.name.dashboard_metrics': '仪表板指标',
    'doc.name.kpi_metrics_doc': 'KPI指标',
    'doc.name.release_notes': '发布说明',
    'doc.name.user_feedback_plan': '用户反馈计划',
    'doc.name.ab_testing_docs': 'A/B测试文档',
    'doc.name.onboarding_flow': '入门流程',
    'doc.name.interaction_flows': '交互流程',
    'doc.name.ui_mockups': 'UI原型',
    'doc.name.ui_style_guide': 'UI风格指南',
    'doc.name.technical_documentation': '技术文档',
    'doc.name.tad': '技术架构文档',
    'doc.name.api_documentation': 'API文档',
    'doc.name.database_schema': '数据库架构',
    'doc.name.developer_guide': '开发者指南',
    'doc.name.developer_documentation': '开发者文档',
    'doc.name.setup_guide': '设置指南',
    'doc.name.test_plan': '测试计划',
    'doc.name.test_documentation': '测试文档',
    'doc.name.cicd_doc': 'CI/CD文档',
    'doc.name.api_versioning_policy': 'API版本控制策略',
    'doc.name.configuration_management_plan': '配置管理计划',
    'doc.name.deployment_plan': '部署计划',
    'doc.name.scalability_plan': '可扩展性计划',
    'doc.name.technical_debt_log': '技术债务日志',
    'doc.name.third_party_integrations': '第三方集成',
    'doc.name.feature_flag_docs': '功能标志文档',
    'doc.name.user_documentation': '用户文档',
    'doc.name.user_support_doc': '用户支持文档',
    'doc.name.knowledge_base': '知识库',
    'doc.name.support_training_doc': '支持培训文档',
    'doc.name.backup_recovery_plan': '备份恢复计划',
    'doc.name.maintenance_plan': '维护计划',
    'doc.name.monitoring_logging_plan': '监控和日志计划',
    'doc.name.performance_optimization_doc': '性能优化',
    'doc.name.cloud_infrastructure_doc': '云基础设施文档',
    'doc.name.bcp': '业务连续性计划',
    'doc.name.sla': '服务级别协议',
    'doc.name.vendor_management_docs': '供应商管理文档',
    'doc.name.incident_response_plan': '事件响应计划',
    'doc.name.data_retention_policy': '数据保留政策',
    'doc.name.data_governance_policy': '数据治理政策',
    'doc.name.security_plan': '安全计划',
    'doc.name.privacy_policy': '隐私政策',
    'doc.name.terms_of_service': '服务条款',
    'doc.name.legal_compliance': '法律合规',
    'doc.name.accessibility_plan': '无障碍计划',
    'doc.name.eol_policy': '生命周期结束政策',
    'doc.name.localization_plan': '本地化计划',
    'doc.name.technical_audit': '技术审计',
    'doc.name.support_playbook': '支持手册',
    'doc.name.quality_review': '质量审查',
    'doc.name.document_improver': '文档改进器',
    'doc.name.format_converter': '格式转换器',
    'doc.name.code_analyst': '代码分析器',
  },
  ja: {
    'app.title': 'OmniDoc 2.0',
    'app.subtitle': 'AI駆動のドキュメント生成システム',
    'project.idea': 'プロジェクトのアイデア',
    'project.idea.placeholder': 'プロジェクトのアイデアを詳しく説明してください...',
    'project.idea.description': 'プロジェクトの詳細な説明を提供してください。詳細を多く含めるほど、生成されるドキュメントの品質が向上します。',
    'project.idea.tips.title': '優れたプロジェクトアイデアを書くためのヒント',
    'project.idea.tips.1': 'プロジェクトが解決する核心的な問題を説明',
    'project.idea.tips.2': 'ターゲットユーザーとそのニーズを含める',
    'project.idea.tips.3': '主要な機能と特性に言及',
    'project.idea.tips.4': '技術要件や制約があれば追加',
    'documents.title': 'ドキュメントを選択',
    'documents.team': 'チームビュー',
    'documents.solo': 'ソロビュー',
    'documents.all': 'すべてのドキュメント',
    'documents.select': '生成するドキュメントを選択',
    'documents.selected': '選択済み',
    'documents.dependencies': '依存関係',
    'documents.priority.high': '高優先度',
    'documents.priority.medium': '中優先度',
    'documents.priority.low': '低優先度',
    'documents.stage.mvp': 'MVP',
    'documents.stage.iteration': '後続イテレーション',
    'documents.audience.team': 'チーム',
    'documents.audience.solo': 'ソロ',
    'documents.audience.mixed': '混合',
    'button.generate': 'ドキュメントを生成',
    'button.creating': 'プロジェクトを作成中...',
    'button.viewResults': '結果を表示',
    'error.network': 'ネットワークエラー',
    'error.loadDocuments': 'ドキュメントの読み込みに失敗しました',
    'error.createProject': 'プロジェクトの作成に失敗しました',
    'status.title': 'プロジェクトステータス',
    'status.connected': 'リアルタイム更新が接続されました',
    'status.polling': '更新をポーリング中（WebSocket利用不可）',
    'status.loading': 'プロジェクトステータスを読み込み中...',
    'status.waiting': '進捗更新を待機中...',
    'status.progress': '進捗',
    'status.completed': '完了',
    'status.generationStarted': '生成が開始されました',
    'status.planning': '計画中',
    'status.generating': '生成中',
    'status.allDone': 'すべて完了！生成されました',
    'status.documents': 'ドキュメント',
    'status.error': 'エラー',
    'status.projectId': 'プロジェクトID',
    'results.title': '生成されたドキュメント',
    'results.share': '共有',
    'results.copied': 'コピーしました！',
    'results.backToStatus': '← ステータスに戻る',
    'results.newProject': '新しいプロジェクト',
    'results.noDocuments': 'まだドキュメントが生成されていません',
    'results.stillGenerating': 'ドキュメントがまだ生成中の可能性があります。しばらくしてから確認してください。',
    'results.viewStatus': 'ステータスを表示',
    'results.loading': 'ドキュメントを読み込み中...',
    'results.errorLoading': 'ドキュメントの読み込みエラー',
    'results.shareTitle': 'OmniDoc生成ドキュメント',
    'results.shareText': 'これらの生成されたプロジェクトドキュメントを確認',
    'level.strategic': 'レベル 1: 戦略（起業家/CEO）',
    'level.product': 'レベル 2: プロダクトマネージャー',
    'level.developer': 'レベル 3: 開発者/技術',
    'level.user': 'レベル 4: ユーザー/エンドユーザー',
    'level.operations': 'レベル 5: 運用/メンテナンス',
    'level.crossLevel': 'クロスレベル（全員）',
    'hero.title': 'アイデアから完全なドキュメントまで数分で',
    'hero.subtitle': '単一のアイデアから包括的なプロジェクトドキュメントを作成するAI駆動のドキュメント生成システム',
    'hero.description': 'マルチエージェントAIシステムを使用して、プロジェクトのアイデアを完全なドキュメントスイートに変換',
    'hero.flow.idea': 'アイデア',
    'hero.flow.agents': 'カスタマイズエージェント',
    'hero.flow.documents': 'ドキュメント',
    'howItWorks.title': '動作方法',
    'howItWorks.step1.title': 'アイデアを提出',
    'howItWorks.step1.description': 'プロジェクトのアイデアを詳しく説明',
    'howItWorks.step2.title': 'ドキュメントを選択',
    'howItWorks.step2.description': '生成するドキュメントを選択',
    'howItWorks.step3.title': 'カスタマイズエージェントが作業',
    'howItWorks.step3.description': 'カスタマイズエージェントがドキュメントを生成',
    'howItWorks.step4.title': '表示とダウンロード',
    'howItWorks.step4.description': '完全なドキュメントスイートにアクセス',
    // Document names (Japanese)
    'doc.name.requirements': '要件ドキュメント',
    'doc.name.requirements_analyst': '要件ドキュメント',
    'doc.name.project_charter': 'プロジェクト憲章',
    'doc.name.business_model': 'ビジネスモデル',
    'doc.name.marketing_plan': 'マーケティング計画',
    'doc.name.gtm_strategy': 'GTM戦略',
    'doc.name.stakeholders_doc': 'ステークホルダードキュメント',
    'doc.name.stakeholder_communication': 'ステークホルダーコミュニケーション',
    'doc.name.risk_management_plan': 'リスク管理計画',
    'doc.name.change_management_plan': '変更管理計画',
    'doc.name.feature_roadmap': '機能ロードマップ',
    'doc.name.pm_management_doc': 'PM管理ドキュメント',
    'doc.name.wbs': '作業分解構造',
    'doc.name.user_stories': 'ユーザーストーリー',
    'doc.name.prd': '製品要件ドキュメント',
    'doc.name.fsd': '機能仕様ドキュメント',
    'doc.name.pm_documentation': 'PMドキュメント',
    'doc.name.user_analytics': 'ユーザー分析',
    'doc.name.dashboard_metrics': 'ダッシュボード指標',
    'doc.name.kpi_metrics_doc': 'KPI指標',
    'doc.name.release_notes': 'リリースノート',
    'doc.name.user_feedback_plan': 'ユーザーフィードバック計画',
    'doc.name.ab_testing_docs': 'A/Bテストドキュメント',
    'doc.name.onboarding_flow': 'オンボーディングフロー',
    'doc.name.interaction_flows': 'インタラクションフロー',
    'doc.name.ui_mockups': 'UIモックアップ',
    'doc.name.ui_style_guide': 'UIスタイルガイド',
    'doc.name.technical_documentation': '技術ドキュメント',
    'doc.name.tad': '技術アーキテクチャドキュメント',
    'doc.name.api_documentation': 'APIドキュメント',
    'doc.name.database_schema': 'データベーススキーマ',
    'doc.name.developer_guide': '開発者ガイド',
    'doc.name.developer_documentation': '開発者ドキュメント',
    'doc.name.setup_guide': 'セットアップガイド',
    'doc.name.test_plan': 'テスト計画',
    'doc.name.test_documentation': 'テストドキュメント',
    'doc.name.cicd_doc': 'CI/CDドキュメント',
    'doc.name.api_versioning_policy': 'APIバージョニングポリシー',
    'doc.name.configuration_management_plan': '構成管理計画',
    'doc.name.deployment_plan': 'デプロイメント計画',
    'doc.name.scalability_plan': 'スケーラビリティ計画',
    'doc.name.technical_debt_log': '技術的負債ログ',
    'doc.name.third_party_integrations': 'サードパーティ統合',
    'doc.name.feature_flag_docs': '機能フラグドキュメント',
    'doc.name.user_documentation': 'ユーザードキュメント',
    'doc.name.user_support_doc': 'ユーザーサポートドキュメント',
    'doc.name.knowledge_base': 'ナレッジベース',
    'doc.name.support_training_doc': 'サポートトレーニングドキュメント',
    'doc.name.backup_recovery_plan': 'バックアップ回復計画',
    'doc.name.maintenance_plan': 'メンテナンス計画',
    'doc.name.monitoring_logging_plan': '監視・ログ計画',
    'doc.name.performance_optimization_doc': 'パフォーマンス最適化',
    'doc.name.cloud_infrastructure_doc': 'クラウドインフラストラクチャドキュメント',
    'doc.name.bcp': '事業継続計画',
    'doc.name.sla': 'サービスレベル契約',
    'doc.name.vendor_management_docs': 'ベンダー管理ドキュメント',
    'doc.name.incident_response_plan': 'インシデント対応計画',
    'doc.name.data_retention_policy': 'データ保持ポリシー',
    'doc.name.data_governance_policy': 'データガバナンスポリシー',
    'doc.name.security_plan': 'セキュリティ計画',
    'doc.name.privacy_policy': 'プライバシーポリシー',
    'doc.name.terms_of_service': '利用規約',
    'doc.name.legal_compliance': '法的コンプライアンス',
    'doc.name.accessibility_plan': 'アクセシビリティ計画',
    'doc.name.eol_policy': 'サポート終了ポリシー',
    'doc.name.localization_plan': 'ローカライゼーション計画',
    'doc.name.technical_audit': '技術監査',
    'doc.name.support_playbook': 'サポートプレイブック',
    'doc.name.quality_review': '品質レビュー',
    'doc.name.document_improver': 'ドキュメント改善ツール',
    'doc.name.format_converter': 'フォーマットコンバーター',
    'doc.name.code_analyst': 'コードアナリスト',
  },
  ko: {
    'app.title': 'OmniDoc 2.0',
    'app.subtitle': 'AI 기반 문서 생성 시스템',
    'project.idea': '프로젝트 아이디어',
    'project.idea.placeholder': '프로젝트 아이디어를 자세히 설명하세요...',
    'project.idea.description': '프로젝트에 대한 자세한 설명을 제공하세요. 더 많은 세부 정보를 포함할수록 생성되는 문서의 품질이 향상됩니다.',
    'project.idea.tips.title': '훌륭한 프로젝트 아이디어 작성 팁',
    'project.idea.tips.1': '프로젝트가 해결하는 핵심 문제 설명',
    'project.idea.tips.2': '대상 사용자 및 그들의 요구사항 포함',
    'project.idea.tips.3': '주요 기능 및 특성 언급',
    'project.idea.tips.4': '기술 요구사항이나 제약사항이 있으면 추가',
    'documents.title': '문서 선택',
    'documents.team': '팀 보기',
    'documents.solo': '솔로 보기',
    'documents.all': '모든 문서',
    'documents.select': '생성할 문서 선택',
    'documents.selected': '선택됨',
    'documents.dependencies': '의존성',
    'documents.priority.high': '높은 우선순위',
    'documents.priority.medium': '중간 우선순위',
    'documents.priority.low': '낮은 우선순위',
    'documents.stage.mvp': 'MVP',
    'documents.stage.iteration': '후속 반복',
    'documents.audience.team': '팀',
    'documents.audience.solo': '솔로',
    'documents.audience.mixed': '혼합',
    'button.generate': '문서 생성',
    'button.creating': '프로젝트 생성 중...',
    'button.viewResults': '결과 보기',
    'error.network': '네트워크 오류',
    'error.loadDocuments': '문서 로드 실패',
    'error.createProject': '프로젝트 생성 실패',
    'status.title': '프로젝트 상태',
    'status.connected': '실시간 업데이트 연결됨',
    'status.polling': '업데이트 폴링 중 (WebSocket 사용 불가)',
    'status.loading': '프로젝트 상태 로드 중...',
    'status.waiting': '진행 상황 업데이트 대기 중...',
    'status.progress': '진행 상황',
    'status.completed': '완료됨',
    'status.generationStarted': '생성 시작됨',
    'status.planning': '계획 중',
    'status.generating': '생성 중',
    'status.allDone': '모두 완료! 생성됨',
    'status.documents': '문서',
    'status.error': '오류',
    'status.projectId': '프로젝트 ID',
    'results.title': '생성된 문서',
    'results.share': '공유',
    'results.copied': '복사됨!',
    'results.backToStatus': '← 상태로 돌아가기',
    'results.newProject': '새 프로젝트',
    'results.noDocuments': '아직 문서가 생성되지 않았습니다',
    'results.stillGenerating': '문서가 아직 생성 중일 수 있습니다. 잠시 후 다시 확인하세요.',
    'results.viewStatus': '상태 보기',
    'results.loading': '문서 로드 중...',
    'results.errorLoading': '문서 로드 오류',
    'results.shareTitle': 'OmniDoc 생성 문서',
    'results.shareText': '이 생성된 프로젝트 문서를 확인하세요',
    'level.strategic': '레벨 1: 전략 (기업가/CEO)',
    'level.product': '레벨 2: 제품 관리자',
    'level.developer': '레벨 3: 개발자/기술',
    'level.user': '레벨 4: 사용자/최종 사용자',
    'level.operations': '레벨 5: 운영/유지보수',
    'level.crossLevel': '크로스 레벨 (모든 사람)',
    'hero.title': '아이디어에서 전체 문서까지 몇 분 안에',
    'hero.subtitle': '단일 아이디어로부터 포괄적인 프로젝트 문서를 생성하는 AI 기반 문서 생성 시스템',
    'hero.description': '다중 에이전트 AI 시스템을 사용하여 프로젝트 아이디어를 완전한 문서 제품군으로 변환',
    'hero.flow.idea': '아이디어',
    'hero.flow.agents': '맞춤형 에이전트',
    'hero.flow.documents': '문서',
    'howItWorks.title': '작동 방식',
    'howItWorks.step1.title': '아이디어 제출',
    'howItWorks.step1.description': '프로젝트 아이디어를 자세히 설명',
    'howItWorks.step2.title': '문서 선택',
    'howItWorks.step2.description': '생성할 문서 선택',
    'howItWorks.step3.title': '맞춤형 에이전트 작업',
    'howItWorks.step3.description': '맞춤형 에이전트가 문서 생성',
    'howItWorks.step4.title': '보기 및 다운로드',
    'howItWorks.step4.description': '완전한 문서 제품군 액세스',
    // Document names (Korean)
    'doc.name.requirements': '요구사항 문서',
    'doc.name.requirements_analyst': '요구사항 문서',
    'doc.name.project_charter': '프로젝트 헌장',
    'doc.name.business_model': '비즈니스 모델',
    'doc.name.marketing_plan': '마케팅 계획',
    'doc.name.gtm_strategy': 'GTM 전략',
    'doc.name.stakeholders_doc': '이해관계자 문서',
    'doc.name.stakeholder_communication': '이해관계자 커뮤니케이션',
    'doc.name.risk_management_plan': '위험 관리 계획',
    'doc.name.change_management_plan': '변경 관리 계획',
    'doc.name.feature_roadmap': '기능 로드맵',
    'doc.name.pm_management_doc': 'PM 관리 문서',
    'doc.name.wbs': '작업 분해 구조',
    'doc.name.user_stories': '사용자 스토리',
    'doc.name.prd': '제품 요구사항 문서',
    'doc.name.fsd': '기능 사양 문서',
    'doc.name.pm_documentation': 'PM 문서',
    'doc.name.user_analytics': '사용자 분석',
    'doc.name.dashboard_metrics': '대시보드 지표',
    'doc.name.kpi_metrics_doc': 'KPI 지표',
    'doc.name.release_notes': '릴리스 노트',
    'doc.name.user_feedback_plan': '사용자 피드백 계획',
    'doc.name.ab_testing_docs': 'A/B 테스트 문서',
    'doc.name.onboarding_flow': '온보딩 플로우',
    'doc.name.interaction_flows': '상호작용 플로우',
    'doc.name.ui_mockups': 'UI 목업',
    'doc.name.ui_style_guide': 'UI 스타일 가이드',
    'doc.name.technical_documentation': '기술 문서',
    'doc.name.tad': '기술 아키텍처 문서',
    'doc.name.api_documentation': 'API 문서',
    'doc.name.database_schema': '데이터베이스 스키마',
    'doc.name.developer_guide': '개발자 가이드',
    'doc.name.developer_documentation': '개발자 문서',
    'doc.name.setup_guide': '설정 가이드',
    'doc.name.test_plan': '테스트 계획',
    'doc.name.test_documentation': '테스트 문서',
    'doc.name.cicd_doc': 'CI/CD 문서',
    'doc.name.api_versioning_policy': 'API 버전 관리 정책',
    'doc.name.configuration_management_plan': '구성 관리 계획',
    'doc.name.deployment_plan': '배포 계획',
    'doc.name.scalability_plan': '확장성 계획',
    'doc.name.technical_debt_log': '기술 부채 로그',
    'doc.name.third_party_integrations': '서드파티 통합',
    'doc.name.feature_flag_docs': '기능 플래그 문서',
    'doc.name.user_documentation': '사용자 문서',
    'doc.name.user_support_doc': '사용자 지원 문서',
    'doc.name.knowledge_base': '지식 베이스',
    'doc.name.support_training_doc': '지원 교육 문서',
    'doc.name.backup_recovery_plan': '백업 복구 계획',
    'doc.name.maintenance_plan': '유지보수 계획',
    'doc.name.monitoring_logging_plan': '모니터링 및 로깅 계획',
    'doc.name.performance_optimization_doc': '성능 최적화',
    'doc.name.cloud_infrastructure_doc': '클라우드 인프라 문서',
    'doc.name.bcp': '비즈니스 연속성 계획',
    'doc.name.sla': '서비스 수준 계약',
    'doc.name.vendor_management_docs': '벤더 관리 문서',
    'doc.name.incident_response_plan': '사고 대응 계획',
    'doc.name.data_retention_policy': '데이터 보존 정책',
    'doc.name.data_governance_policy': '데이터 거버넌스 정책',
    'doc.name.security_plan': '보안 계획',
    'doc.name.privacy_policy': '개인정보 보호 정책',
    'doc.name.terms_of_service': '서비스 약관',
    'doc.name.legal_compliance': '법적 규정 준수',
    'doc.name.accessibility_plan': '접근성 계획',
    'doc.name.eol_policy': '수명 종료 정책',
    'doc.name.localization_plan': '현지화 계획',
    'doc.name.technical_audit': '기술 감사',
    'doc.name.support_playbook': '지원 플레이북',
    'doc.name.quality_review': '품질 검토',
    'doc.name.document_improver': '문서 개선 도구',
    'doc.name.format_converter': '형식 변환기',
    'doc.name.code_analyst': '코드 분석기',
  },
};

// Global language state (for non-React usage)
let globalLanguage: Language = 'en';

// Language change listeners
const listeners = new Set<() => void>();

function notifyListeners() {
  listeners.forEach(listener => listener());
}

export function setLanguage(lang: Language): void {
  if (languages.includes(lang)) {
    globalLanguage = lang;
    if (typeof window !== 'undefined') {
      localStorage.setItem('omniDoc_language', lang);
    }
    notifyListeners();
  }
}

export function getLanguage(): Language {
  if (typeof window !== 'undefined') {
    const saved = localStorage.getItem('omniDoc_language');
    if (saved && languages.includes(saved as Language)) {
      return saved as Language;
    }
  }
  return globalLanguage;
}

export function t(key: string): string {
  const lang = getLanguage();
  return translations[lang]?.[key] || translations.en[key] || key;
}

/**
 * Get translated document name by document ID
 * Falls back to English if translation not found, then to the original name
 */
export function getDocumentName(docId: string, language?: Language): string {
  const lang = language || getLanguage();
  const translationKey = `doc.name.${docId}`;
  const translated = translations[lang]?.[translationKey];
  if (translated) return translated;
  
  // Fallback to English
  const englishTranslated = translations.en?.[translationKey];
  if (englishTranslated) return englishTranslated;
  
  // Fallback to original name (capitalize and format)
  return docId
    .split('_')
    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
    .join(' ');
}

/**
 * Get translated level name by DocumentLevel enum
 */
export function getLevelName(level: number, language?: Language): string {
  const lang = language || getLanguage();
  const levelKeys: Record<number, string> = {
    1: 'level.strategic',
    2: 'level.product',
    3: 'level.developer',
    4: 'level.user',
    5: 'level.operations',
    0: 'level.crossLevel',
  };
  
  const key = levelKeys[level];
  if (!key) return '';
  
  const translated = translations[lang]?.[key];
  if (translated) return translated;
  
  // Fallback to English
  return translations.en?.[key] || '';
}

// React hook for i18n
export function useI18n() {
  const [language, setLanguageState] = useState<Language>(() => {
    if (typeof window !== 'undefined') {
      const saved = localStorage.getItem('omniDoc_language');
      if (saved && languages.includes(saved as Language)) {
        return saved as Language;
      }
    }
    return 'en';
  });

  useEffect(() => {
    const handleLanguageChange = () => {
      const newLang = getLanguage();
      setLanguageState(newLang);
    };

    listeners.add(handleLanguageChange);
    return () => {
      listeners.delete(handleLanguageChange);
    };
  }, []);

  const changeLanguage = useCallback((lang: Language) => {
    setLanguage(lang);
    setLanguageState(lang);
  }, []);

  const translate = useCallback((key: string): string => {
    return translations[language]?.[key] || translations.en[key] || key;
  }, [language]);

  return {
    language,
    setLanguage: changeLanguage,
    t: translate,
  };
}

// Initialize language from localStorage
if (typeof window !== 'undefined') {
  const saved = localStorage.getItem('omniDoc_language');
  if (saved && languages.includes(saved as Language)) {
    globalLanguage = saved as Language;
  }
}
